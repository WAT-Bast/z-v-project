<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <script src="https://kit.fontawesome.com/5ef77fbbed.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/hospital_information.css">
    <title>병원 정보 페이지</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
</head>
<body>
<!-- navbar -->
<div class="main_bar">
    <a th:href="@{/main}" class="home">
        <img src="../img/융프로고.png" alt="Z&V 로고">
        <!--        <div th:if="${session.user != null}">됨</div>-->
        <!--        <div th:if="${session.user == null}">asdasd</div>-->
        <div class="home_str">Z&V</div>
    </a>
    <div id="button_id">
        <div>
            <form action="/login">
                <div th:if="${session.user == null}">
                    <button value="로그인" type="submit">login</button>
                </div>
            </form>
        </div>
        <div>
            <form method="get" action="/logout">
                <div th:if="${session.user != null}">
                    <button value="로그아웃">logout</button>
                </div>
            </form>
        </div>
        <div>
            <form method="get" action="/manager">
                <div th:if="${adminTrue == true}">
                    <button value="관리자">admin</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="hospital_title">
    <form class="hospital_form_container" method="post" name="manager">
        <div class="hospital_title_name_box">
            <!--            <input type="text" class="hospital_name_input" th:text="${manager.Hosptial_name}" disabled/>-->
            <p class="hospital_name_input" th:text="${manager.Hosptial_name}"></p>
        </div>


        <div class="hospital_img_box">
            <div class="hospital_img_container">
                <img th:src="${manager.image_information}"/>
            </div>
        </div>


        <div class="hospital_information">
            <div class="Address_Box">
                <div class="hospital_address">
                    <div class="address_icon"><i class="fa-solid fa-location-dot"></i></div>
                    <!--                    <input class="address_inputBox" type="text" value="인천광역시 남동구 소래역남로16번길 75(논현동) 더타워상가 C동 1층 24시 소래동물병원" disabled/>-->
                    <p class="address_inputBox" id="addressDB" th:text="${manager.hospital_address}"></p>
                </div>
            </div>

            <div class="time_container">
                <div class="test">
                    <div class="time_icon"><i class="fa-regular fa-clock"></i></div>
                    <div class="monday_box"><li class="monday_container"><div class="monday"><strong>월</strong></div><p class="week_title" th:text="${manager.TimeMon}"></p></li></div>
                    <!--                    <input class="Monday_title" type="text" value="월요일 휴무" disabled/>-->
                </div>
                <!--                <div class="week_box"><li class="week_container"><strong>화</strong><input class="week_title" type="text" value="10:00 - 22:00" disabled/></li></div>-->
                <div class="week_box"><li class="week_container"><strong>화</strong><p class="week_title" th:text="${manager.TimeTues}"></p></li></div>
                <div class="week_box"><li class="week_container"><strong>수</strong><p class="week_title" th:text="${manager.TimeWednes}"></p></li></div>
                <div class="week_box"><li class="week_container"><strong>목</strong><p class="week_title" th:text="${manager.TimeThurs}"></p></li></div>
                <div class="week_box"><li class="week_container"><strong>금</strong><p class="week_title" th:text="${manager.TimeFri}"></p></li></div>
                <div class="week_box"><li class="week_container"><strong>토</strong><p class="week_title" th:text="${manager.TimeSatur}"></p></li></div>
                <div class="week_box"><li class="week_container"><strong>일</strong><p class="week_title" th:text="${manager.TimeSun}"></p></li></div>

            </div>
            <div class="phoneNumber_container">
                <div class="hospital_phoneNumber">
                    <div class="phoneNumberBox">
                        <div class="phoneNumber_icon"><i class="fa-solid fa-phone"></i></div>
                        <!--                        <input class="phoneNumberBox" type="tel" value="032-438-3227" disabled/>-->
                        <!--                        <p class="phoneNumberBox">010-8322-7256</p>-->
                        <a class="phoneNumberBox" th:text="${manager.tell}"></a>
                    </div>
                </div>
            </div>

            <div class="hospital_link">
                <div class="link_Box">
                    <div class="link_icon"><i class="fa-solid fa-house"></i></div>
                    <!--                    <input class="link_urlBox" type="url" value="http://soraeah.co.kr/index.php" disabled/>-->
                    <a class="link_urlBox" th:href="${manager.site}"><div th:text="${manager.site}" class="siteTextStyle"></div></a>
                </div>
            </div>
        </div>

        <div id="map" style="width:60%;height:400px; margin-left:310px"></div>
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=82ae9863074c3e5fe237c9bb8fdcd654"></script>
        <script th:inline="javascript">
            let lateX = [[${manager.locationLatitude}]]
            let lateY = [[${manager.locationlongitude}]]

            var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                mapOption = {
                    center: new kakao.maps.LatLng(lateX, lateY), // 지도의 중심좌표
                    level: 3 // 지도의 확대 레벨
                };

            var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

            // 마커가 표시될 위치입니다
            var markerPosition  = new kakao.maps.LatLng(lateX, lateY);

            // 마커를 생성합니다
            var marker = new kakao.maps.Marker({
                position: markerPosition
            });

            // 마커가 지도 위에 표시되도록 설정합니다
            marker.setMap(map);

            // 아래 코드는 지도 위의 마커를 제거하는 코드입니다
            // marker.setMap(null);
        </script>

        <br>

        <div class="review_container">
            <div class="visitor_review">
                <h3 class="review_title">방문자 리뷰</h3>
            </div>


            <div class="review">

                <div style="width:35%;">
                    <canvas id="canvas"></canvas>
                </div>

                <script>
                    new Chart(document.getElementById("canvas"), {
                        type: 'horizontalBar',
                        data: {
                            labels: ['5', '4', '3', '2', '1'],
                            datasets: [{
                                // label: '테스트 데이터셋',
                                data: [10, 3, 30, 23, 10, 5, 15, 25, 2, 4, 1, 13, 52, 23],
                                borderColor: "rgba(255, 201, 14, 1)",
                                backgroundColor: "rgba(255, 201, 14, 0.5)",
                                fill: false,
                            }]
                        },
                        options: {
                            legend: {
                                display: false
                            },
                            responsive: true,
                            title: {
                                display: false,
                                text: '막대 차트 테스트'
                            },
                            tooltips: {
                                mode: 'index',
                                intersect: true,
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: false
                            },
                            scales: {
                                xAxes: [{
                                    display: false,
                                    scaleLabel: {
                                        display: false,

                                    },
                                }],
                                yAxes: [{
                                    display: true,
                                    ticks: {
                                        autoSkip: true,
                                    },
                                    scaleLabel: {
                                        display: true,
                                    }
                                }]
                            }
                        }
                    });

                </script>

                <div class="review_score_container">
                    <div class="ScoreBox">
                        <div class="score">4.9</div>
                        <input type="radio" name="reviewStar1" value="5" id="rate1"><label for="rate1" checked>★</label>
                        <input type="radio" name="reviewStar1" value="5" id="rate2"><label for="rate2">★</label>
                        <input type="radio" name="reviewStar1" value="5" id="rate3"><label for="rate3">★</label>
                        <input type="radio" name="reviewStar1" value="5" id="rate4"><label for="rate4">★</label>
                        <input type="radio" name="reviewStar1" value="5" id="rate5"><label for="rate5">★</label>
                        <div class="review_score">리뷰 1017개</div>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <form class="review_star_container" method="post" th:action="'/'+${manager.hospital_number}">
        <div class="review_comment">
            <div class="review_comment_Box">
                <div th:if="${session.user != null}" th:text="${session.user.user_name}" class="review_name"></div>
                <input th:if="${message == null}" type="text" class="comment" name="reviewContent" placeholder="리뷰를 작성해주세요.">
                <div th:if="${message != null}" th:text="${message}"></div>
            </div>

            <div class="user_review_Box">
                <div class="review_score_container2">
                    <div class="ScoreBox2">
                        <input type="radio" name="reviewStar1" value="5" id="review1"><label for="review1">★</label>
                        <input type="radio" name="reviewStar1" value="5" id="review2"><label for="review2">★</label>
                        <input type="radio" name="reviewStar1" value="5" id="review3"><label for="review3">★</label>
                        <input type="radio" name="reviewStar1" value="5" id="review4"><label for="review4">★</label>
                        <input type="radio" name="reviewStar1" value="5" id="review5"><label for="review5">★</label>
                    </div>
                </div>
                <div class="review_comment_container">
                    <input th:if="${message == null}"type="submit" class="review_comment_btn" value="등록하기">
                </div>

            </div>


        </div>
        <div th:each="review : ${reviewList}">
            <div th:text="${review.user.user_name}"></div>
            <div th:text="${review.reviewContent}"></div>
            <div th:text="${review.reviewCreateAt}"></div>
        </div>

    </form>

    <footer>
        <section id="contact" class="section">
            <div class="contact__rights">
                <div>개인정보처리방침 | 침해행위금지 | 개인정보공시</div>
                <br>
                <div>페이지 제작 : 누구보다 빛나조</div>
            </div>
        </section>
    </footer>
</div>



</body>
</html>